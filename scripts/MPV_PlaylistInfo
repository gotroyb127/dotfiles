#!/bin/sh

Print() {
	S=$(Player.sh playlist-info) || {
		r=$?
		printf '%s' "[$r] "
		return $r
	}
	LF_Clear
	printf "%s" "$S"
}
Wait() {
	printf '%s' 'Waiting... : '
	read ans
	case $ans in
	(q*)
		exit 0
	;;
	(c*)
		clear
		Wait
	;;
	(r*)
		exec "$0" "$@"
	;;
	esac
}
Main() {
	while true
	do
		Print || Wait
		sleep .93
	done
}

trap 'echo; Wait; Main' INT

Main
